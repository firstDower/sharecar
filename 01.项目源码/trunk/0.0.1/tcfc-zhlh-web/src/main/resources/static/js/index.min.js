$(function() {
  /* 投保人信息 */
  //下拉框select
  $("#job").select({
    items: ["母子", "父子","父女","母女"]
  });

  //下一步

  /* 健康告知 */
    //select
    $("#subdivide").select({
        items: ["行业细分1", "行业细分2"]
    });

    $("#classify").select({
        items: ["职业分类1", "职业分类2"]
    });

    $("#details").select({
        items: ["职业详情1", "职业详情2"]
    });

  //确定
  $("#assign").click(function() {
    console.log("健康告知确定按钮");
  });

  /* 去支付 */
  //切换支付方式
  $(".plan-pay").click(function() {
    var sel = $(this)
      .find("span")
      .hasClass("active");
    if (!sel) {
      $(this)
        .find("span")
        .addClass("active");
      $(this)
        .siblings()
        .find("span")
        .removeClass("active");
      console.log($(this).text());
    }
  });
  //确定支付
  $("#affirm").click(function() {
    console.log("确认支付");
  });

  /* 信息确认 */
  //同意条约
  $(".consents").click(function() {
    if ($(this).hasClass("active")) {
      $(this).removeClass("active");
    } else {
      $(this).addClass("active");
    }
  });
  //下一步
  $(".next-Message").click(function() {
    console.log("信息确认-下一步");
  });
  //应付金额
  $(".pay-Message").click(function() {
    console.log("信息确认-应付金额");
  });
  //签字功能
    $(".sign").on('touchstart', function (e) {
        e.preventDefault();
        //clearCanvas(e);
        $("#mc").show();
        //document.documentElement.style.overflow = "hidden";

        $('.page').addClass('hiddens')

    });

  //执行签字
  if ($(".page").hasClass("Message")) {
    $(".js-signature").jqSignature();
  }

  /* 支付失败 */
  //重新支付
  $("#pay-again").click(function() {
    console.log("重新支付");
  });

  /* 支付成功 */
  //返回首页
  $(".goBack").click(function() {
    console.log("返回首页");
  });

  $(".goOn").click(function() {
    console.log("继续购买");
  });
  $(".itemBox .items")
    .eq(0)
    .show();
  /* 综合医疗-1 */
  $(".synthesis-tab li").click(function() {
    var index = $(this).index();
    $(this)
      .addClass("active")
      .siblings()
      .removeClass("active");
    $(".itemBox .items")
      .eq(index)
      .show()
      .siblings()
      .hide();
  });

  //支付
  $(".pay").click(function() {
    console.log(
      $(this)
        .find(".money")
        .text()
    );
  });
});

/* 签字功能 */
//清除
function clearCanvas(e) {
    e.preventDefault();
    $("#signature").html(
        '<p><em>Your signature will appear here when you click "Save Signature"</em></p>'
    );
    $(".js-signature").jqSignature("clearCanvas");
    $("#saveBtn").attr("disabled", true);
}

function saveSignature() {
    var imgFlag = $("#sign img").hasClass("img");
    $("#signature").empty();
    if (mouseFlag) {
        var dataUrl = $(".js-signature").jqSignature("getDataURL");
        var img = $('<img class="img">').attr("src", dataUrl);
        if (imgFlag) {
            $("#sign img").remove();
        }
        $("#sign").append(img);
        $("#mc").hide();

        GainDate();
        orientation();
    }
    $('.page').removeClass('hiddens')


}
//保存


$(".js-signature").on("jq.signature.changed", function() {
  $("#saveBtn").attr("disabled", false);
});
function cancelSign() {
    $('#mc').hide();
    $('.page').removeClass('hiddens');
    orientation()
}

$('#mc').click(function () {
    cancelSign()
})
/* 时间转换 */
function GainDate() {
  var date = new Date();
  var seperator1 = "-";
  var year = date.getFullYear();
  var month = date.getMonth() + 1;
  var strDate = date.getDate();
  if (month >= 1 && month <= 9) {
    month = "0" + month;
  }
  if (strDate >= 0 && strDate <= 9) {
    strDate = "0" + strDate;
  }
  var currentdate = year + seperator1 + month + seperator1 + strDate;
  $("#sign .date").text(currentdate);
}

$('#Pop .yes').on('click', function () {
    console.log('确定')
    $('#Pop').hide();
    $('.page').removeClass('hiddens')

})

$('#Pop .no').on('click', function () {
    console.log('取消');
    $('#Pop').hide();
    $('.page').removeClass('hiddens')

})
//显示隐藏
function showHide(type) {
    if (type) {
        $('#Pop').show()
    } else {
        $('#Pop').show();
        $('#Pop .no').hide()
    }
    $('.page').addClass('hiddens');
}

function orientation() {
    $("html,body").animate({
        scrollTop: $("#consent").offset().top
    }, 0);
}